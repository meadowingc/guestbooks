<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/admin-styles.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíå</text></svg>">
    <title>Guestbooks - {{template "title" .}}</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" />
    <script src="https://mochi.meadow.cafe/reaper/meadow/embed/4.js" async></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <script src="/assets/js/admin-ui.js" defer></script>
</head>

<body>
    <nav class="nav">
        <div class="nav-inner">
            <div class="nav-left">
                <div class="brand"><a href="/admin">üíå Guestbooks</a></div>
            </div>
            <div class="nav-right">
                {{block "nav-right" .}}
                {{if .CurrentUser}}
                <div class="row">
                    <span class="nav-user-info">Welcome, {{.CurrentUser.Username}}</span>
                    <a href="/admin/settings" class="nav-link">Settings</a>
                    <form action="/admin/logout" method="post" style="display: inline; margin: 0;">
                        <button type="submit" class="btn btn-outline btn-sm">Logout</button>
                    </form>
                </div>
                {{else}}
                <a href="/admin/signin" class="btn btn-primary btn-sm">Sign In</a>
                <a href="/admin/signup" class="btn btn-outline btn-sm">Sign Up</a>
                {{end}}
                {{end}}
            </div>
        </div>
    </nav>
    
    <div class="container">
        <main>
            {{template "content" .}}
        </main>
    </div>

    <footer class="footer">
        <p>
            This project is <a href="https://codeberg.org/meadowingc/guestbooks">open source</a> ‚Ä¢ 
            Made with ‚ù§Ô∏è by <a target="_blank" href="https://meadow.cafe/">Meadow</a>
        </p>
    </footer>


    <div id="cookie-banner" style="display: none;">
        <p>
            This website uses cookies for basic functionality (track your session so the platform knows who you are).
            If you continue to use this site, you agree to the use of cookies, otherwise you should leave the site.
        </p>
        <div class="cookie-actions">
            <button id="accept-cookies" class="btn btn-primary">Accept</button>
            <button onclick="rejectCookies();" class="btn btn-outline">I don't want your cookies!</button>
        </div>
    </div>
    <script>
        (function () {
            var acceptedCookies = localStorage.getItem('acceptedCookies');
            if (!acceptedCookies) {
                document.getElementById('cookie-banner').style.display = 'block';
            }

            document.getElementById('accept-cookies').onclick = function () {
                localStorage.setItem('acceptedCookies', 'true');
                document.getElementById('cookie-banner').style.display = 'none';
            }
        })()

        function rejectCookies() {
            document.body.innerHTML = '<h1 style="text-align: center; margin-top: 20%;">We\'re sad to see you go, but we respect your cookie choices. Have a cookie-free day!</h1>';
        }
    </script>
</body>

</html>
