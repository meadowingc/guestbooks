{{template "layout.html" .}}

{{define "title"}}Sign In{{end}}

{{define "content"}}
<div class="auth-container">
    <div class="auth-card fade-in">
        <div class="auth-header">
            <h1>Sign In</h1>
        </div>

        <form method="post" class="auth-form">
            <div class="form-group">
                <label for="username">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                    </svg>
                    Username
                </label>
                <input type="text" id="username" name="username" required autofocus>
            </div>

            <div class="form-group">
                <label for="password">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"/>
                    </svg>
                    Password
                </label>
                <input type="password" id="password" name="password" required>
            </div>

            <button type="submit" class="btn btn-primary btn-block">Sign In</button>
        </form>

        <div class="auth-footer">
            <p>Don't have an account? <a href="/admin/signup">Sign up here</a></p>
            <p class="mt-2">Forgot your password? <a href="/forgot-password">Reset it here</a></p>
            <p class="text-tiny text-muted" style="margin-top: 1rem;">
                By using <i>Guestbooks</i> you agree to our
                <a href="/terms-and-conditions">Terms and Conditions</a>
            </p>
        </div>
    </div>
</div>

<script>
// Show success toast if redirected after password reset
document.addEventListener('DOMContentLoaded', function () {
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('password_reset') === 'success') {
        const toast = document.createElement('div');
        toast.className = 'callout callout-success';
        toast.style.cssText = 'position: fixed; top: 80px; right: 20px; z-index: 1000; max-width: 400px; animation: fadeIn 0.3s ease-out;';
        toast.innerHTML = '<p>Your password has been reset successfully. Please sign in with your new password.</p>';
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 5000);
    }
});
</script>
{{end}}
